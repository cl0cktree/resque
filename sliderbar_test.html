<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no, address=no, email=no">
    <title>슬라이더바 테스트</title>
<!-- 
    <link rel="stylesheet" type="text/css" href="https://zobank.kbstar.com/mpfm/app/css/2019/common.css">
    <link rel="stylesheet" type="text/css" href="https://zobank.kbstar.com/mpfm/app/css/2019/mym_style.css">
    <script src="https://zobank.kbstar.com/mpfm/app/js/2019/jquery-1.12.0.min.js"></script>
    <script src="https://zobank.kbstar.com/mpfm/app/js/2019/jquery-ui-min-1.8.16.min.js"></script>
    <script src="https://zobank.kbstar.com/mpfm/app/js/2019/mym_script.js"></script>
     -->
</head>
<body>
    <div id="wrapper" class="login">
        <style>
            .kb_slider_bar{display:block;position:relative;width:500px;height:30px;border:1px solid #000;margin:0 auto;background:yellowgreen;}
            .kb_slider_over{display:block;position:relative;width:0%;max-width:500px;height:30px;background:yellow;}
            .kb_slider_bar .kb_slider_button{display:block;position:absolute;width:30px;height:30px;background:blue;left:0;top:0;}
            .kb_slider_bar .kb_slider_button:before{content:'';display:block;position:absolute;min-width:30px;height:30px;left:0px;top:0;color:#fff;}
        </style>
        <div id="container" class="kb_slider_bar" data-max="500000" data-default="50">
            <span class="kb_slider_over"></span>
            <span class="kb_slider_button"></span>
        </div>
        <script>
            var kb_slider_bar=document.querySelector('.kb_slider_bar');
            var slider_bar_width=kb_slider_bar.clientWidth;
            var kb_slider_over=document.querySelector('.kb_slider_over');
            var slider_bar_button=document.querySelector('.kb_slider_button');
            var slider_bar_button_num=window.getComputedStyle(slider_bar_button, ':before').content;
            var slider_icon_point;
            var slider_bar_per=100*slider_icon_point/slider_bar_width;
            var mouse_down_start;
            var slider_data_default=((kb_slider_bar.getAttribute('data-default')/100)*slider_bar_width)-(slider_bar_button.clientWidth/2);
            var slider_data_max=((kb_slider_bar.getAttribute('data-max')/1000)*slider_bar_width);
            var slider_bar_button_before=document.documentElement.style.setProperty('content',slider_data_max);
            var plus_num=0;
            var frame_start;
            var slide_icon_pageX;
            var mousedown_start;
            var slider_bar_start;
            var slide_touch_move;
            var animate_box;
            var stop_animate_box;
            var animation_frame_1 = 0;
            var animation_frame_2 = 600;

            function default_data(){
                slider_bar_button.style.left=slider_data_default+'px';
                kb_slider_over.clientWidth=slider_data_default+'px';
                slider_bar_button.innerHTML=slider_data_max;
                // console.log(slider_bar_button_before);
            };
            function animate_frame(){
                for(i=0;i<slider_data_default;i++){
                    animate_box = setTimeout(function(){
                        plus_num++
                        animation_frame_1=plus_num*100;
                        slider_bar_button.style.left=plus_num+'px';
                        kb_slider_over.clientWidth=plus_num+'px';
                        console.log(plus_num);
                    },animation_frame_1);
                }
            };
            function kb_mouseOut(event){
                mousedown_start=false;
                console.log(mousedown_start);
            };
            function kb_mouseDown(event){
                slider_bar_width=kb_slider_bar.clientWidth;
                slide_icon_pageX=event.pageX;
                mousedown_start=true;
            };
            function kb_mouseMove(event){
                slider_bar_width=kb_slider_bar.clientWidth;
                slide_icon_pageX=event.pageX;
                slider_bar_start=(window.innerWidth-slider_bar_width)/2;
                slider_icon_point=slide_icon_pageX-slider_bar_start;
                slider_bar_per=100*slider_icon_point/slider_bar_width;

                if((slider_icon_point>slider_bar_width-30)&&(mousedown_start==true)){
                    slider_icon_point=slider_bar_width-30;
                    slider_bar_button.style.left=slider_icon_point+'px';
                    kb_slider_over.clientWidth=slider_icon_point+'px';
                    slider_bar_button.innerHTML=slider_data_max;
                }else{
                    if(mousedown_start==true){
                        slider_bar_button.style.left=slider_icon_point+'px';
                        kb_slider_over.clientWidth=slider_icon_point+'px';
                        slider_bar_button.innerHTML=slider_data_max;
                        console.log(slider_icon_point);
                    }
                };
                // console.log(slider_bar_button.style.left);
            };
            function kb_mouseUp(event){
                slider_bar_width=kb_slider_bar.clientWidth;
                slide_icon_pageX=event.pageX;
                slider_bar_start=(window.innerWidth-slider_bar_width)/2;
                slider_icon_point=slide_icon_pageX-slider_bar_start;
                slider_bar_per=100*slider_icon_point/slider_bar_width;
                mousedown_start=false;

                if((slider_icon_point>slider_bar_width-30)&&(mousedown_start==true)){
                    slider_icon_point=slider_bar_width-30;
                    slider_bar_button.style.left=slider_icon_point+'px';
                    kb_slider_over.clientWidth=slider_icon_point+'px';
                    slider_bar_button.innerHTML=slider_data_max;
                }else{
                    if(mousedown_start==true){
                        slider_bar_button.style.left=slider_icon_point+'px';
                        kb_slider_over.clientWidth=slider_icon_point+'px';
                        slider_bar_button.innerHTML=slider_data_max;
                        console.log(slider_icon_point);
                    }
                };
            };
            default_data();

            // kb_slider_bar.addEventListener('mouseout',kb_mouseOut,true);
            kb_slider_bar.addEventListener('mousedown',kb_mouseDown,false);
            kb_slider_bar.addEventListener('mousemove',kb_mouseMove,false);
            kb_slider_bar.addEventListener('mouseup',kb_mouseUp,false);

        </script>
    </div>
</body>
</html>